if(chrome!=null&&chrome.runtime){new MutationObserver(()=>{document.querySelectorAll("style").forEach(n=>{var i;(i=n.textContent)!=null&&i.includes(".with-scroll-bars-hidden")&&n.remove()})}).observe(document.head,{childList:!0});const s=document.createElement("div");s.id="speech-extension-container",document.body.appendChild(s);const o=s.attachShadow({mode:"open"}),c=document.createElement("div");c.id="speech-extension-root",o.appendChild(c);const e=document.createElement("div");e.id="speech-extension-modal-host",o.appendChild(e),fetch(chrome.runtime.getURL("assets/style.css")).then(n=>n.text()).then(n=>{const i=n.replace("((-webkit-hyphens:none)) and",""),d=document.createElement("style");d.textContent=i,o.appendChild(d)});const r=document.createElement("div");r.id="speech-extension-logo",r.dataset.iconUrl=chrome.runtime.getURL("speech.png"),o.appendChild(r);const a=document.createElement("script");a.src=chrome.runtime.getURL("assets/main.js"),a.type="module",a.onload=function(){const n=new CustomEvent("speechExtensionReady");window.dispatchEvent(n)},o.appendChild(a),window.addEventListener("speechToggleSidebar",n=>{const{open:i}=n.detail,d=document.getElementById("speech-extension-container"),l=d==null?void 0:d.shadowRoot,t=l==null?void 0:l.getElementById("speech-extension-root");i?(console.log("speechToggleSidebar open!"),document.body.style.marginRight="360px",document.body.style.transition="margin 0.3s ease",t&&(t.style.position="fixed",t.style.top="0",t.style.right="0",t.style.width="360px",t.style.height="100vh",t.style.zIndex="9999",t.style.backgroundColor="white",t.style.boxShadow="-2px 0 8px rgba(0,0,0,0.1)")):(console.log("speechToggleSidebar close!"),document.body.style.marginRight="0px",t&&t.removeAttribute("style"))})}else console.warn("Not running in Chrome extension environment. This app requires Chrome extension to work properly.");window.addEventListener("db_message",h=>{const{requestId:s,action:o,data:c}=h.detail;if(!(chrome!=null&&chrome.runtime)){const e=new CustomEvent("db_response",{detail:{responseId:s,error:"Not in Chrome extension environment"}});window.dispatchEvent(e);return}chrome.runtime.sendMessage({action:o,data:c},e=>{const r=new CustomEvent("db_response",{detail:{responseId:s,responseData:e==null?void 0:e.data,error:e==null?void 0:e.error}});window.dispatchEvent(r)})});
