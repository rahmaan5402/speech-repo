if(chrome!=null&&chrome.runtime){new MutationObserver(()=>{document.querySelectorAll("style").forEach(t=>{var i;(i=t.textContent)!=null&&i.includes(".with-scroll-bars-hidden")&&t.remove()})}).observe(document.head,{childList:!0});const o=document.createElement("div");o.id="speech-extension-container",document.body.appendChild(o);const n=o.attachShadow({mode:"open"}),c=document.createElement("div");c.id="speech-extension-root",n.appendChild(c);const s=document.createElement("div");s.id="speech-extension-modal-host",n.appendChild(s),fetch(chrome.runtime.getURL("assets/style.css")).then(t=>t.text()).then(t=>{const i=t.replace("((-webkit-hyphens:none)) and",""),d=document.createElement("style");d.textContent=i,n.appendChild(d)});const r=document.createElement("div");r.id="speech-extension-logo",r.dataset.iconUrl=chrome.runtime.getURL("speech.png"),n.appendChild(r);const a=document.createElement("script");a.src=chrome.runtime.getURL("assets/main.js"),a.type="module",a.onload=function(){const t=new CustomEvent("speechExtensionReady");window.dispatchEvent(t)},n.appendChild(a),window.addEventListener("speechToggleSidebar",t=>{const{open:i}=t.detail,d=document.getElementById("speech-extension-container"),l=d==null?void 0:d.shadowRoot,e=l==null?void 0:l.getElementById("speech-extension-root");i?(document.body.style.marginRight="410px",document.body.style.transition="margin 0.3s ease",e&&(e.style.position="fixed",e.style.top="0",e.style.right="0",e.style.width="410px",e.style.height="100vh",e.style.zIndex="999999",e.style.backgroundColor="white",e.style.boxShadow="-2px 0 8px rgba(0,0,0,0.1)")):(document.body.style.marginRight="0px",e&&e.removeAttribute("style"))})}else console.warn("Not running in Chrome extension environment. This app requires Chrome extension to work properly.");window.addEventListener("db_request",m=>{const{requestId:o,action:n,data:c}=m.detail;if(!(chrome!=null&&chrome.runtime)){const s=new CustomEvent("db_response",{detail:{responseId:o,responseData:Result.error("Not in Chrome extension environment")}});window.dispatchEvent(s);return}chrome.runtime.sendMessage({action:n,data:c},s=>{const r=new CustomEvent("db_response",{detail:{responseId:o,responseData:s}});window.dispatchEvent(r)})});
